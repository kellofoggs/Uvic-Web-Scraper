$(document).ready(function(){function e(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t(e){for(var t=$("nav.style__navBar___afcIs"),a=$("#strctr"),i=0;i<e.length;i++){var n=e[i];if(0===i){var r='<div id="subjects" class="side-nav" style="display: none;"><h4>Subject list</h4>';r+='<div id="subjects-list" class="subjects-list-box">',r+="<ul>"}r+='<li><a href="#/courses?group='+n.title+'">'+n.title+"</a></li>",i+1===e.length&&(r+="</ul>",r+="</div>",r+="</div>",a.before(r))}}function a(){var a;0===$("#subjects").length&&window.catalogId.length>0&&$.ajax({url:"/banner/self-service/pkg_kuali_api.pr_get_catalog?p_catalog="+e(window.catalogId),type:"GET",dataType:"json",success:function(e){e.length>0&&t(e)}})}function i(){var e=$(".style__itemHeaderH2___3U8zB span:first-child");e.length>=1&&e.each(function(e){var t=$(this),a=t.html();0===$.trim(a).length&&t.parent().hide()})}function n(){"Catalog"===$("#kuali-catalog header.md-toolbar .style__mobileTitle___34uJM").text()&&$("#kuali-catalog header.md-toolbar .style__mobileTitle___34uJM").text("Calendar")}$(document).on("input",'#kuali-catalog .style__autocomplete___3HiB2 [type="text"]',function(){var e=$(this).parent();setTimeout(function(){if(e.length>0){var t=e.find('ul[role="listbox"] li span.style__optionTitle___3CJ2l');$(t).each(function(){var e=$(this),t=e.text();isNaN(t.substr(1,2))||e.text(e.text().slice(5))})}},750)}),$(document).on("input","#kuali-catalog #Search",function(){var e=window.location.hash;if(-1!==(e=e.replace(/<[^>]*>?/gm,"")).indexOf("#/courses?searchTerm")&&$(document).on("click","#subjects-list-nav li a",function(e){e.preventDefault(),$this=$(this);var t=$this.attr("href");location.href=t,location.reload()}),-1!==e.indexOf("#/policies?searchTerm")){var t=location.href;t=t.replace(/<[^>]*>?/gm,""),setInterval(function(){if(t!=location.href)return t=location.href,void window.requestAnimationFrame(o)},500)}}),$("#kuali-catalog").on("click","li.style__li___2yyQA",function(){var e,t;"true"===$(this).find(".style__collapsibleBox___15waq a").attr("aria-hidden")&&window.requestAnimationFrame(o)}),$(window).resize(function(){window.requestAnimationFrame(l),a(),window.requestAnimationFrame(r)}),$("body").on("DOMSubtreeModified","#kuali-catalog #kuali-catalog-main .course-view__itemDetailContainer___2tFFK h2, #kuali-catalog .course-view__itemDetailContainer___2tFFK h2",function(){var e=$("#kuali-catalog #kuali-catalog-main .course-view__itemDetailContainer___2tFFK h2").text();window.requestAnimationFrame(l)}),$.urlParam=function(e){var t=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null===t?null:decodeURI(t[1])||0};var r=function(){var e=$("#subjects"),t=$("#subjects-nav"),a="";if($("nav.style__navBar___afcIs .style__navList___9frg3").length>0)if(e.length>0){var i=window.location.hash;if(i=i.replace(/<[^>]*>?/gm,""),void 0===t||0===t.length){var n=e.clone();n.prop("id","subjects-nav"),n.find("#subjects-list").prop("id","subjects-list-nav"),$("nav.style__navBar___afcIs").after(n),-1!==i.indexOf("#/courses")||-1!==i.indexOf("#/courses/")||-1!==i.indexOf("#/Courses?")?n.show():n.hide()}else-1!==i.indexOf("#/courses")||-1!==i.indexOf("#/courses/")||-1!==i.indexOf("#/Courses?")?t.show():t.hide()}else window.requestAnimationFrame(r);else window.requestAnimationFrame(r)},o=function(){var e=window.location.hash;if(-1!==(e=e.replace(/<[^>]*>?/gm,"")).indexOf("#/policies")){if($linkText=$("#kuali-catalog .style__collapseContainer___37k-v a, #kuali-catalog ._1OwMfPKz ._2BFjfHBr a,  #kuali-catalog .style__h3___2YECs a"),$linkText.length>0)return void $($linkText).each(function(){var e=$(this),t=e.text();isNaN(t.substr(1,2))||e.text(e.text().slice(5))});window.requestAnimationFrame(o)}},l=function(){if($("#kuali-catalog #__KUALI_TLP, .style__searchResults___-VVO8").length>0){n();var e=window.location.hash;if(-1!==(e=e.replace(/<[^>]*>?/gm,"")).indexOf("#/courses/")){if($("#kuali-catalog #kuali-catalog-main .course-view__itemDetailContainer___2tFFK h2").length>0||$("#kuali-catalog main .course-view__itemDetailContainer___2tFFK h2").length>0){var t=$("#kuali-catalog #kuali-catalog-main .course-view__itemDetailContainer___2tFFK h2, #kuali-catalog main .course-view__itemDetailContainer___2tFFK h2").text();return 1===$("#kuali-catalog #course-schedules").length&&($schedule=$("#kuali-catalog .course-view__itemDetailContainer___2tFFK .class-schedules").remove()),void d()}window.requestAnimationFrame(l)}if(-1!==e.indexOf("#/policy/")){if($("#kuali-catalog .style__wrapper___FtCnk h2, #kuali-catalog .style__collapseContainer___37k-v a").text().length>0){var a=$("#kuali-catalog .style__wrapper___FtCnk h2, #kuali-catalog .style__collapseContainer___37k-v a");if(!isNaN(a.text().substr(1,2))){var r=a.text().slice(5);a.text(r),$("head title").text(r),$("._93GXH6fZ .PWrZe0m7").text(r)}return}window.requestAnimationFrame(l)}if(-1!==e.indexOf("#/policies")&&window.requestAnimationFrame(o),-1!==e.indexOf("#/programs")){if($("h2.program-view__title___3jxuU").length>0)return void i();window.requestAnimationFrame(l)}if(-1!==e.indexOf("#/search?")){var s=$(".style__searchResultLink___34Zaj");if(s.length>0){var c=s.find("a");return void $(c).each(function(){var e=$(this),t=e.text();isNaN(t.substr(1,2))||e.text(e.text().slice(5))})}window.requestAnimationFrame(l)}}else window.requestAnimationFrame(l)},s=function(e){var t=$('#kuali-catalog .noBreak:contains("Pro Forma")'),a="";return t.length>0?"no"===(a=t.find(".course-view__pre___2VF54 div").text()).toLowerCase()?t.hide():"yes"===a.toLowerCase()&&!0===e&&t.show():a="",a};function c(){var e=$('#kuali-catalog .noBreak h3:contains("Notice"), #kuali-catalog #course-status-notice'),t="",a=!0;return e.length>0?($noticeElement=e.next("div").find(".course-view__pre___2VF54").find("div"),noticeTextVal=$noticeElement.text(),noticeTextVal.length>0&&("this course is no longer offered."===noticeTextVal.toLowerCase()&&(a=!1),$noticeElement.attr("id","course-status-notice"),$noticeElement.attr("class","notices"),e.hide(),$noticeElement.show())):a=!0,a}function u(){var e=$("meta[name=term-code]").attr("content");if(void 0!==e)return e.trim()}function _(){var e=$("meta[name=publish-timetable]").attr("content");if(void 0!==e)return e.trim()}function h(){var e=$("#main a#future-calendar");if(e.length>0){var t=u(),a=e.text();if(a=a.replace(/<[^>]*>?/gm,""),7==t.length){var i=[],n=t.split("|"),r=n[0],o=n[1],l="",s="",c="";"01"==r?(l="May",s=o):"05"==r?(l="September",s=o+"-"+(c=Number(o)+1)):"09"==r&&(l="January",s=o+"-"+(c=Number(o)+1)),-1!=a.indexOf("##futuremonth##")&&(a=a.replace("##futuremonth##",l)),-1!=a.indexOf("##futureterms##")&&(a=a.replace("##futureterms##",s))}var _=window.location.hash,h=window.location.pathname,d=window.location.protocol+"//"+window.location.host;_=_.replace(/<[^>]*>?/gm,""),h=h.replace(/<[^>]*>?/gm,""),d=d.replace(/<[^>]*>?/gm,""),-1!=h.indexOf("/undergrad/")?h=h.replace("/undergrad/","/future/undergrad/"):-1!=h.indexOf("/grad/")&&(h=h.replace("/grad/","/future/grad/")),d+=h+_,e.prop("href",d),e.prop("title",a),e.text(a)}}function d(){var e=c();if(!0===e){if("no"===s(e).toLowerCase()){var t=$("#kuali-catalog #kuali-catalog-main .course-view__itemDetailContainer___2tFFK h2, #kuali-catalog main .course-view__itemDetailContainer___2tFFK h2").text();if(t.length>1)for(var a=t.substr(0,t.indexOf(" ")),i="",n="",r=!1,o=0;o<a.length;o++)!1===r?isNaN(a.charAt(o))?i+=a.charAt(o):(r=!0,n+=a.charAt(o)):n+=a.charAt(o);var l=u(),h=_();if(7==l.length){var d=[],m=l.split("|"),f=m[0],v=m[1];if(!(4!=v.length||isNaN(v)||2!=f.length||isNaN(f)||"Y"!=h&&"N"!=h||"01"!=f&&"05"!=f&&"09"!=f)){var g="",w="",p="",x="",k="";"01"==f?(d.push(v.concat(f)),"Y"==h&&d.push(v+"05")):"05"==f?(d.push(v.concat(f)),"Y"==h&&(d.push(v.concat("09")),k=Number(v)+1,d.push(k.toString()+"01"))):"09"==f&&("N"==h&&d.push(v+"05"),d.push(v.concat(f)),k=Number(v)+1,d.push(k.toString()+"01"));for(var b=0;b<d.length;b++){var F="",y="";p=d[b].slice(-2),x=d[b].slice(0,4),"01"==p?F="Spring":"05"==p?F="Summer":"09"==p&&(F="Fall"),0===b&&(g+='<div class="noBreak class-schedules" id="course-schedules">',g+='<h3 class="course-view__label___FPV12">Course schedules</h3>',g+="<p>Summer timetable available: February 15. Fall and Spring timetables available: May 15.</p>",g+="<p>Use the buttons below to search the timetable. If the search results show 0 classes and the message ‘Please search again’, then the class is not scheduled for the selected term.</p>",g+='<div id="course-schedules-links">');var C="https://banner.uvic.ca",A=window.location.hostname;"dev.uvic.ca"==A?C="https://bannerdev.uvic.ca":"test.uvic.ca"==A&&(C="https://bannerpreprod.uvic.ca"),g+='<p><a class="btn_mid" target= "_blank" href="'+(y=(y=C+"/StudentRegistrationSsb/ssb/classSearch/classSearch?term="+x+p+"&txt_subject="+i+"&txt_courseNumber="+n).replace(/<[^>]*>?/gm,""))+'">'+F+" "+x+"</a></p>",b==d.length-1&&(g+="</div>",g+="</div>")}}}$(".class-schedules").length>0&&$(".class-schedules").remove(),$("#kuali-catalog #kuali-catalog-main .course-view__itemDetailContainer___2tFFK .noBreak, #kuali-catalog main .course-view__itemDetailContainer___2tFFK .noBreak").last().after(g),g=""}}else s(e)}function m(){a(),h(),window.requestAnimationFrame(l),window.requestAnimationFrame(r)}$(window).bind("hashchange",function(){var e=window.location.hash;e=e.replace(/<[^>]*>?/gm,""),m()}),m()});